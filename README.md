# DVV Keyboard Configuration

Это конфигурация для кастомной клавиатуры DVV, состоящей из двух половинок.

## Структура клавиатуры

Каждая половинка имеет матрицу 7x5 (7 столбцов, 5 рядов):
- **Столбцы**: 1-7 (от центра к краям)
- **Ряды**: 1-5 (сверху вниз)
- **Ряд 5**: островок под большим пальцем

### Дополнительные кнопки
- Левая половинка: кнопка в позиции 7,4 (столбец 7, ряд 4) - назначена как Shift
- Правая половинка: кнопка в позиции 7,4 (столбец 7, ряд 4) - неиспользованная

### Кнопки переключения слоёв
- **L1**: позиция 7,4 (столбец 7, ряд 4) - левая половинка
- **L1**: позиция 6,4 (столбец 6, ряд 4) - правая половинка
- **L2**: позиция 1,5 (столбец 1, ряд 5) - обе половинки (островок)
- **L3**: позиция 7,5 (столбец 7, ряд 5) - обе половинки (островок)

### Неиспользованные кнопки (готовы для переназначения)
- **UN1**: позиция 7,1 (столбец 7, ряд 1) - обе половинки
- **UN3**: позиция 7,3 (столбец 7, ряд 3) - правая половинка
- **UN4**: позиция 7,4 (столбец 7, ряд 4) - правая половинка
- **UN5**: позиции 2-4,5 (столбцы 2-4, ряд 5) - обе половинки (островок)

## Раскладка

### Левая половинка
```
┌───┬───┬───┬───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │UN1│  <- Ряд 1 (UN1 = неиспользованная позиция 7,1)
├───┼───┼───┼───┼───┼───┤   │
│TAB│ Q │ W │ E │ R │ T │   │  <- Ряд 2 (QWERTY)
├───┼───┼───┼───┼───┼───┤   │
│ALT│ A │ S │ D │ F │ G │   │  <- Ряд 3 (QWERTY)
├───┼───┼───┼───┼───┼───┤   │
│CTL│ Z │ X │ C │ V │ B │L1 │  <- Ряд 4 (QWERTY, L1 = слой 1)
├───┼───┼───┼───┼───┼───┤   │
│L2 │UN5│UN5│UN5│DEL│ESC│L3 │  <- Ряд 5 (островок, L2 = слой 2, L3 = слой 3)
└───┴───┴───┴───┴───┴───┴───┘
  1   2   3   4   5   6   7
```

### Правая половинка
```
┌───┬───┬───┬───┬───┬───┬───┐
│ 7 │ 8 │ 9 │ 0 │ - │ = │UN1│  <- Ряд 1 (UN1 = неиспользованная позиция 7,1)
├───┼───┼───┼───┼───┼───┤   │
│ Y │ U │ I │ O │ P │ [ │ ] │  <- Ряд 2
├───┼───┼───┼───┼───┼───┤   │
│ H │ J │ K │ L │ ; │ ' │UN3│  <- Ряд 3 (UN3 = неиспользованная позиция 7,3)
├───┼───┼───┼───┼───┼───┤   │
│ N │ M │ , │ . │ / │L1 │UN4│  <- Ряд 4 (L1 = слой 1)
├───┼───┼───┼───┼───┼───┤   │
│L2 │UN5│UN5│UN5│BSP│ENT│L3 │  <- Ряд 5 (островок, L2 = слой 2, L3 = слой 3)
└───┴───┴───┴───┴───┴───┴───┘
  1   2   3   4   5   6   7
```

## Слои

### Default Layer (Слой 0)
Основная QWERTY раскладка как показано выше.

### Lower Layer (Слой 1) - `&mo 1`
Активируется кнопками **L1**:
- **Левая половинка**: позиция 7,4 (столбец 7, ряд 4)
- **Правая половинка**: позиция 6,4 (столбец 6, ряд 4)

Содержит цифры, символы и дополнительные функции.

### Raise Layer (Слой 2) - `&mo 2`
Активируется кнопками **L2**:
- **Обе половинки**: позиция 1,5 (столбец 1, ряд 5) в островке

Содержит специальные символы и функции.

### Adjust Layer (Слой 3) - `&mo 3`
Активируется кнопками **L3**:
- **Обе половинки**: позиция 7,5 (столбец 7, ряд 5) в островке

Содержит системные функции (F-клавиши, управление звуком, сброс и т.д.).

### Как работают слои:
- **`&mo`** - слой активен только при удержании кнопки
- **`&to`** - переключение на слой до следующего переключения
- **`&tog`** - циклическое переключение между слоями

## Сборка

Для сборки прошивки используйте GitHub Actions или локальную сборку ZMK:

```bash
west build -d build/dvv_left -p -b nice_nano_v2 -- -DSHIELD=dvv_left
west build -d build/dvv_right -p -b nice_nano_v2 -- -DSHIELD=dvv_right
```

## Файлы конфигурации

- `boards/shields/dvv_left/` - конфигурация левой половинки
- `boards/shields/dvv_right/` - конфигурация правой половинки
- `config/dvv_left.*` - дополнительные настройки для левой половинки
- `config/dvv_right.*` - дополнительные настройки для правой половинки

## Переназначение неиспользованных кнопок

Для переназначения неиспользованных кнопок (UN1, UN3, UN4, UN5) замените `&trans` на нужную клавишу в соответствующих файлах:

### Примеры переназначения:

```c
// Вместо &trans используйте:
&kp F1        // F-клавиши
&kp HOME      // Навигация
&kp PG_UP     // Page Up
&kp PG_DN     // Page Down
&mo 1         // Переключение на слой 1
&mt LCTRL ESC // Модификатор + клавиша
&bt BT_SEL 0  // Bluetooth профиль 0
&out OUT_TOG  // Переключение вывода
```

### Позиции для переназначения:

- **UN1** (7,1): обе половинки, ряд 1, столбец 7
- **UN3** (7,3): правая половинка, ряд 3, столбец 7  
- **UN4** (6-7,4): правая половинка, ряд 4, столбцы 6-7
- **UN5** (1-4,5): обе половинки, ряд 5, столбцы 1-4 (островок)

## Настройка

1. Загрузите прошивку на левую половинку (центральная)
2. Загрузите прошивку на правую половинку (периферийная)
3. Подключите половинки через Bluetooth или проводное соединение

## Справочник значений кнопок

### Основные клавиши
```c
// Буквы
&kp A &kp B &kp C &kp D &kp E &kp F &kp G &kp H &kp I &kp J
&kp K &kp L &kp M &kp N &kp O &kp P &kp Q &kp R &kp S &kp T
&kp U &kp V &kp W &kp X &kp Y &kp Z

// Цифры
&kp N0 &kp N1 &kp N2 &kp N3 &kp N4 &kp N5 &kp N6 &kp N7 &kp N8 &kp N9

// Символы
&kp MINUS &kp EQUAL &kp LBKT &kp RBKT &kp BSLH &kp SQT &kp SEMI &kp COMMA &kp DOT &kp FSLH
&kp GRAVE &kp TILDE &kp EXCL &kp AT &kp HASH &kp DLLR &kp PRCNT &kp CARET &kp AMPS &kp ASTRK
&kp LPAR &kp RPAR &kp UNDER &kp PLUS &kp LBRC &kp RBRC &kp PIPE &kp COLON &kp DQT &kp QMARK

// Функциональные клавиши
&kp F1 &kp F2 &kp F3 &kp F4 &kp F5 &kp F6 &kp F7 &kp F8 &kp F9 &kp F10 &kp F11 &kp F12
&kp F13 &kp F14 &kp F15 &kp F16 &kp F17 &kp F18 &kp F19 &kp F20 &kp F21 &kp F22 &kp F23 &kp F24

// Навигация
&kp HOME &kp END &kp PG_UP &kp PG_DN &kp LEFT &kp RIGHT &kp UP &kp DOWN
&kp INS &kp DEL &kp BSPC &kp TAB &kp RET &kp ESC &kp SPACE

// Модификаторы
&kp LCTRL &kp RCTRL &kp LSHFT &kp RSHFT &kp LALT &kp RALT &kp LGUI &kp RGUI
&kp LCTRL &kp RCTRL &kp LSHFT &kp RSHFT &kp LALT &kp RALT &kp LGUI &kp RGUI

// Мультимедиа
&kp C_PLAY_PAUSE &kp C_VOL_UP &kp C_VOL_DN &kp C_MUTE &kp C_NEXT &kp C_PREV
&kp C_BRI_UP &kp C_BRI_DN &kp C_MIC_MUTE &kp C_EJECT

// Системные
&kp PSCRN &kp CLCK &kp SLCK &kp NLCK &kp APP &kp MENU &kp PWR &kp SLEP &kp WAKE
```

### Слои
```c
// Переключение слоёв
&mo 0    // Моментальное переключение на слой 0
&mo 1    // Моментальное переключение на слой 1
&mo 2    // Моментальное переключение на слой 2
&mo 3    // Моментальное переключение на слой 3
&mo 4    // Моментальное переключение на слой 4

&to 0    // Переключение на слой 0 до следующего переключения
&to 1    // Переключение на слой 1 до следующего переключения
&to 2    // Переключение на слой 2 до следующего переключения
&to 3    // Переключение на слой 3 до следующего переключения
&to 4    // Переключение на слой 4 до следующего переключения

&tog 1   // Циклическое переключение между основным и слоем 1
&tog 2   // Циклическое переключение между основным и слоем 2
&tog 3   // Циклическое переключение между основным и слоем 3

&lt 1 200  // Переключение на слой 1 после удержания 200ms
&lt 2 300  // Переключение на слой 2 после удержания 300ms
&lt 3 400  // Переключение на слой 3 после удержания 400ms

&mt LSHFT 1  // Короткое нажатие = Shift, удержание = слой 1
&mt LCTRL 2  // Короткое нажатие = Ctrl, удержание = слой 2
&mt LALT 3   // Короткое нажатие = Alt, удержание = слой 3
```

### Bluetooth
```c
// Bluetooth профили
&bt BT_SEL 0  // Выбор Bluetooth профиля 0
&bt BT_SEL 1  // Выбор Bluetooth профиля 1
&bt BT_SEL 2  // Выбор Bluetooth профиля 2
&bt BT_SEL 3  // Выбор Bluetooth профиля 3
&bt BT_SEL 4  // Выбор Bluetooth профиля 4
&bt BT_SEL 5  // Выбор Bluetooth профиля 5

&bt BT_CLR    // Очистка Bluetooth профилей
&bt BT_NXT    // Следующий Bluetooth профиль
&bt BT_PRV    // Предыдущий Bluetooth профиль
```

### Выводы
```c
// Переключение вывода
&out OUT_TOG    // Переключение между выводами
&out OUT_USB    // Переключение на USB
&out OUT_BLE    // Переключение на Bluetooth
```

### Системные функции
```c
// Системные команды
&sys_reset      // Сброс системы
&bootloader     // Загрузка bootloader
&ext_power EP_ON    // Включение внешнего питания
&ext_power EP_OFF   // Выключение внешнего питания
```

### Модификаторы
```c
// Модификаторы с клавишами
&mt LCTRL ESC   // Ctrl при удержании, ESC при коротком нажатии
&mt LSHFT TAB   // Shift при удержании, Tab при коротком нажатии
&mt LALT SPACE  // Alt при удержании, Space при коротком нажатии
&mt LGUI RET    // GUI при удержании, Enter при коротком нажатии

// Tap-hold
&mt LCTRL Z     // Ctrl при удержании, Z при коротком нажатии
&mt LSHFT A     // Shift при удержании, A при коротком нажатии
&mt LALT S      // Alt при удержании, S при коротком нажатии
```

### Макросы
```c
// Простые макросы
&macro_tap &kp LCTRL &kp C    // Ctrl+C
&macro_tap &kp LCTRL &kp V    // Ctrl+V
&macro_tap &kp LCTRL &kp X    // Ctrl+X
&macro_tap &kp LCTRL &kp Z    // Ctrl+Z
&macro_tap &kp LCTRL &kp A    // Ctrl+A
&macro_tap &kp LCTRL &kp S    // Ctrl+S

// Сложные макросы
&macro_tap &kp LCTRL &kp LSHFT &kp ESC  // Ctrl+Shift+Esc
&macro_tap &kp LGUI &kp L    // Win+L (блокировка)
&macro_tap &kp LGUI &kp D    // Win+D (показать рабочий стол)
&macro_tap &kp LGUI &kp TAB  // Win+Tab (переключение задач)
```

### Специальные значения
```c
&trans          // Прозрачность (наследует значение из нижнего слоя)
&none           // Ничего не делает
&reset          // Сброс конфигурации
&bootloader     // Загрузка bootloader
&sys_reset      // Сброс системы
```

### Примеры комбинаций
```c
// Часто используемые комбинации
&mt LCTRL ESC   // Ctrl при удержании, ESC при коротком нажатии
&mt LSHFT TAB   // Shift при удержании, Tab при коротком нажатии
&mt LALT SPACE  // Alt при удержании, Space при коротком нажатии
&mt LGUI RET    // GUI при удержании, Enter при коротком нажатии

// Слои с задержкой
&lt 1 200  // Слой 1 после удержания 200ms
&lt 2 300  // Слой 2 после удержания 300ms
&lt 3 400  // Слой 3 после удержания 400ms

// Bluetooth профили
&bt BT_SEL 0    // Профиль 0 (например, для телефона)
&bt BT_SEL 1    // Профиль 1 (например, для планшета)
&bt BT_SEL 2    // Профиль 2 (например, для ноутбука)
``` 